<!DOCTYPE html>
<meta charset="utf-8">
<style>
html, body {
	margin: 0;
}
	.axis path,
    .axis line {
        fill: none;
        stroke: none;
}
    .axis text {
        font-family: sans-serif;
        font-size: 10px;
        text-align: right;
}

.hover {
	opacity: 0.7
}

div.tooltip {   
  position: absolute;           
  text-align: left;           
  width: 553px;                  
  height: 553px;                 
  padding: 2px;             
  font: 12px sans-serif;        
  background: white;   
  border: 0px;      
  border-radius: 8px;           
  pointer-events: none;
  left: 55px;
  top: 55px;      
}

</style>
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

<div class="overlay" id="overlay" style="display:none;"></div>
 
<div class="box" id="box">
 <a class="boxclose" id="boxclose"></a>
 <h1>Important message</h1>
 <p>
  Here comes a very important message for your user.
  Turn this window off by clicking the cross.
 </p>
</div>

<script>

var padding = 100

var width = 670;
	height = 670;

var svg = d3.select("body").append("svg")
	.attr("width", width )
	.attr("height", height);

var colorScale = d3.scale.linear()
		.domain([4, 30, 45,  55])
		.range(["#D7191C", "#FDAE61", "#A6D96A", "#008837"])

var strany = ["ANO", "Úsvit", "TOP 09", "Zelení", "SSČR", "SSO", "SPOZ", "Cibulka", "Piráti", "Občané", "ODS", "LEV 21", "KSČM", "Koruna", "KDU-ČSL", "KAN", "Změna", "Hlavu v.", "DSSS", "ČSSD"]

var celeStrany = ["ANO", "Úsvit přímé demokracie", "TOP 09", "Strana zelených", "Strana soukromníků ČR", "Strana svobodných občanů", "SPOZ", "Pravý blok Petra Cibulky", "Pirátská strana", "Občané 2011", "ODS", "LEV 21", "KSČM", "Koruna česká", "KDU-ČSL", "Klub angažovaných nestraníků", "Hnutí změna", "Hlavu vzhůru", "DSSS", "ČSSD"]

var scale = d3.scale.ordinal()
			.domain(strany)
			.rangePoints([0, width - padding - 27])

var xAxis = d3.svg.axis()
		.scale(scale)
		.orient("bottom")

var yAxis = d3.svg.axis()
		.scale(scale)
		.orient("right")

var div = d3.select("body").append("div")
				.attr("class", "tooltip")
				.style("opacity", 0)


var dataset = [-1, 44.5, 43.5, 43.25, 39.25, 25, 43.5, 39.25, 40, 43.25, 35.5, 31.5, 36.75, 43.25, 44.5, 39.75, 40.75, 29.75, 33.5, 35.75,
44.5, -1, 46.5, 39.25, 38.25, 31, 38.5, 40.25, 43, 42.25, 37.5, 29.25, 30, 48.25, 41.25, 37.5, 36.75, 26.5, 34.5, 30.5,
43.5, 46.5, -1, 41.25, 33.25, 30, 38.5, 37.25, 40, 39.25, 41.5, 28.25, 30.75, 47.25, 46.25, 42.75, 34, 32.75, 29.5, 34.75,
43.25, 39.25, 41.25, -1, 36, 22.75, 44.25, 42, 46.75, 46, 26.25, 38.25, 42.75, 40, 41.25, 35.5, 46.75, 20.5, 39.25, 41.5,
39.25, 38.25, 33.25, 36, -1, 28.75, 36.25, 39, 33.75, 43, 31.25, 25.25, 35.75, 37, 37.25, 33.5, 34.75, 35.5, 37.25, 26.5,
25, 31, 30, 22.75, 28.75, -1, 22, 30.75, 32.5, 24.75, 32, 26.5, 20.75, 32.75, 26, 24.75, 19.5, 30.75, 23.75, 19.5,
43.5, 38.5, 38.5, 44.25, 36.25, 22, -1, 46.25, 39.75, 50.25, 29.5, 34.5, 43, 39.25, 40.5, 38.75, 41.75, 30.75, 38.5, 43.75,
39.25, 40.25, 37.25, 42, 39, 30.75, 46.25, -1, 39.75, 49, 31.25, 33.25, 37.75, 41, 36.25, 34.5, 38.75, 32.5, 42.25, 37.5,
40, 43, 40, 46.75, 33.75, 32.5, 39.75, 39.75, -1, 44.75, 29, 35.75, 36.5, 41.75, 34, 33.25, 43, 24.25, 38, 37.25,
43.25, 42.25, 39.25, 46, 43, 24.75, 50.25, 49, 44.75, -1, 32.25, 32.25, 41.75, 43, 44.25, 38.5, 44.75, 30.5, 44.25, 40.5,
35.5, 37.5, 41.5, 26.25, 31.25, 32, 29.5, 31.25, 29, 32.25, -1, 19.75, 22, 42.25, 39.25, 32.5, 24.5, 32.75, 23.25, 23.5,
31.5, 29.25, 28.25, 38.25, 25.25, 26.5, 34.5, 33.25, 35.75, 32.25, 19.75, -1, 32.25, 28.25, 27.75, 23.5, 32, 18.75, 30.5, 33.75,
36.75, 30, 30.75, 42.75, 35.75, 20.75, 43, 37.75, 36.5, 41.75, 22, 32.25, -1, 32.75, 34.75, 27.5, 38.5, 22.75, 36.75, 38.5,
43.25, 48.25, 47.25, 40, 37, 32.75, 39.25, 41, 41.75, 43, 42.25, 28.25, 32.75, -1, 45.25, 41.5, 35.75, 33.5, 31.25, 32.5,
44.5, 41.25, 46.25, 41.25, 37.25, 26, 40.5, 36.25, 34, 44.25, 39.25, 27.75, 34.75, 45.25, -1, 39.25, 36.5, 33.5, 29.5, 36.25,
39.75, 37.5, 42.75, 35.5, 33.5, 24.75, 38.75, 34.5, 33.25, 38.5, 32.5, 23.5, 27.5, 41.5, 39.25, -1, 33.25, 31, 26.25, 31,
40.75, 36.75, 34, 46.75, 34.75, 19.5, 41.75, 38.75, 43, 44.75, 24.5, 32, 38.5, 35.75, 36.5, 33.25, -1, 21, 33.75, 36,
29.75, 26.5, 32.75, 20.5, 35.5, 30.75, 30.75, 32.5, 24.25, 30.5, 32.75, 18.75, 22.75, 33.5, 33.5, 31, 21, -1, 28.25, 25,
33.5, 34.5, 29.5, 39.25, 37.25, 23.75, 38.5, 42.25, 38, 44.25, 23.25, 30.5, 36.75, 31.25, 29.5, 26.25, 33.75, 28.25, -1, 35.25,
35.75, 30.5, 34.75, 41.5, 26.5, 19.5, 43.75, 37.5, 37.25, 40.5, 23.5, 33.75, 38.5, 32.5, 36.25, 31, 36, 25, 35.25, -1];

svg.append("g")
	.attr("class", "axis")
	.attr("transform", "translate(" + padding/2 + ", 20)")
	.call(xAxis)
svg.selectAll("g.axis text")
	.attr("transform", "rotate(-90)")

svg.append("g")
	.attr("class", "axis")
	.attr("transform", "translate(" + (padding/2 - 57) + ", 61)")
	.call(yAxis)

var values = svg.selectAll("g.value")
	.data(dataset)
	.enter()
	.append("g")
	.attr("class", "value")
	.on("mouseover", function (d, i) {
		icko = i
		svg.selectAll("rect")
			.filter(function (d, i) { 
				return ((i % 20) == (icko % 20) || Math.floor(i / 20) == Math.floor(icko / 20) ) 
			})
			.attr("class", "hover")
	})
	.on("mouseout", function (d, i) {
		icko = i
		svg.selectAll("rect")
			.filter(function (d, i) { 
				return ((i % 20) == (icko % 20) || Math.floor(i / 20) == Math.floor(icko / 20) ) 
			})
			.attr("class", "")
	})
	.on("click", function(d, i) {
		//div.transition()
		//	.duration(200)
		//	.style("opacity", .9)
		//div .html(celeStrany[i % 20] + " vs " + celeStrany[Math.floor(i / 20)] + "<br>" + otazky);
	});
	
	values.append("rect")
		.attr("x", function(d, i) {
			return (i % 20) * (width - padding)/20 + padding/2
		})
		.attr("y", function(d, i) {
			return Math.floor(i / 20) * (height - padding)/20 + padding/2
		})
		.attr("height", 25)
		.attr("width", 25)
		.attr("fill", function(d) {
			if (d == -1) {
				return "lightgray";
			} else {
				return colorScale(d);
			}
	});
	
	values.append("text")
		.attr("text-anchor", "middle")
		.text(function (d, i) {
			if (d == -1) {
				return "";
			} else {
				return Math.round(d / 0.64); //max. bodů je 64
			}
		})
		.attr("x", function(d, i) {
			return (i % 20) * (width - padding)/20 + padding/2 + 13
		})
		.attr("y", function(d, i) {
			return Math.floor(i / 20) * (height - padding)/20 + padding/2 + 15
		})
		.attr("font-family", "sans-serif")
    	.attr("font-size", "9px")
    	.attr("fill", "white");


</script>